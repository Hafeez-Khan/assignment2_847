language: python
python:
	- '3.6'

install:
	- pip install codecov

addons:
	ssh_known_hosts: moon.scs.ryerson.ca

script:
	-python -m unittest -v sample_test.py
	-coverage run sample_test.py

after_success:
	bash <(curl -s https://codecov.io/bash)

before_install:
	  - openssl aes-256-cbc -K $encrypted_a2930921627b_key -iv $encrypted_a2930921627b_iv
    	  -in deploy_rsa.enc -out /tmp/deploy_rsa -d
	  - eval "$(ssh-agent -s)"
	  - chmod 600 /tmp/deploy_rsa
	  - ssh-add /tmp/deploy_rsa

deploy:
    provider: script
    skip_cleanup: true
    script: rsync -r --delete-after --quiet
      ${TRAVIS_BUILD_DIR}/deploy_folder
      m533khan@moon.scs.ryerson.ca:/home/avm/courses/cps847/m533khan
      #home/avm/courses/cps847/your_scs_id 
    on:
      branch: master
